name: Monorepo Publish

on:
  push:
    tags:
      - "v*"

permissions:
  contents: read
  id-token: write

jobs:
  quality-gate:
    uses: ./.github/workflows/reusable-build.yml

  publish-log-triage:
    needs: quality-gate
    uses: ./.github/workflows/reusable-publish.yml
    with:
      package-path: packages/log-triage-sandbox
      tag: latest

  publish-local-vault:
    needs: quality-gate
    uses: ./.github/workflows/reusable-publish.yml
    with:
      package-path: packages/local-vault
      tag: latest
